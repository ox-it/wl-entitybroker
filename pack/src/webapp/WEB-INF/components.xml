<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!-- Aaron Zeckoski (aaronz@vt.edu) -->
<!-- Antranig Basman (antranig@caret.cam.ac.uk) -->
<beans>

   <!-- Bring in the HBM related beans beans -->
   <import resource="hibernate-hbms.xml" />

   <!-- Bring in the hibernate related beans -->
   <import resource="spring-hibernate.xml" />


   <!-- Public beans -->
   <bean id="org.sakaiproject.entitybroker.entityprovider.EntityProviderManager"
      class="org.sakaiproject.entitybroker.impl.entityprovider.EntityProviderManagerImpl" init-method="init">
   </bean>

   <bean id="org.sakaiproject.entitybroker.access.HttpServletAccessProviderManager"
      class="org.sakaiproject.entitybroker.impl.access.HttpServletAccessProviderManagerImpl">
   </bean>
   
   <bean id="org.sakaiproject.entitybroker.access.PortletAccessProviderManager"
      class="org.sakaiproject.entitybroker.impl.access.PortletAccessProviderManagerImpl">
   </bean>

   <bean id="org.sakaiproject.entitybroker.EntityBroker" 
      class="org.sakaiproject.entitybroker.impl.EntityBrokerImpl" init-method="init">
      <property name="entityProviderManager" ref="org.sakaiproject.entitybroker.entityprovider.EntityProviderManager" />
      <property name="entityHandler" ref="org.sakaiproject.entitybroker.impl.EntityHandler" />
      <property name="eventTrackingService" ref="org.sakaiproject.event.api.EventTrackingService" />
      <property name="entityManager" ref="org.sakaiproject.entity.api.EntityManager" />
      <property name="dao" ref="org.sakaiproject.entitybroker.dao.EntityBrokerDao" />
   </bean>


   <!-- Private beans -->
   <bean class="org.sakaiproject.entitybroker.impl.event.EventReceiverCoordinator" init-method="init">
      <property name="eventTrackingService" ref="org.sakaiproject.event.api.EventTrackingService" />
   </bean>

   <bean id="org.sakaiproject.entitybroker.impl.oldentity.EntityBrokerEntityProducer"
      class="org.sakaiproject.entitybroker.impl.oldentity.EntityBrokerEntityProducer" init-method="init">
      <property name="entityHandler" ref="org.sakaiproject.entitybroker.impl.EntityHandler" />
      <property name="entityManager" ref="org.sakaiproject.entity.api.EntityManager" />
      <property name="entityProviderManager" ref="org.sakaiproject.entitybroker.entityprovider.EntityProviderManager" />
      <property name="httpAccess" ref="org.sakaiproject.entitybroker.impl.oldentity.EntityBrokerHttpAccess" />
   </bean>

   <bean id="org.sakaiproject.entitybroker.impl.EntityHandler" 
      class="org.sakaiproject.entitybroker.impl.EntityHandler">
      <property name="serverConfigurationService" ref="org.sakaiproject.component.api.ServerConfigurationService" />
      <property name="entityProviderManager" ref="org.sakaiproject.entitybroker.entityprovider.EntityProviderManager" />
   </bean>

   <bean id="org.sakaiproject.entitybroker.impl.entityprovider.EntityProviderAutoRegistrar"
      class="org.sakaiproject.entitybroker.impl.entityprovider.EntityProviderAutoRegistrar"
      init-method="init">
      <property name="entityProviderManager" ref="org.sakaiproject.entitybroker.entityprovider.EntityProviderManager" />
   </bean>

   <bean id="org.sakaiproject.entitybroker.impl.oldentity.EntityBrokerHttpAccess" 
      class="org.sakaiproject.entitybroker.impl.oldentity.EntityBrokerHttpAccess">
      <property name="accessProviderManager" ref="org.sakaiproject.entitybroker.access.HttpServletAccessProviderManager" />
      <property name="sessionManager" ref="org.sakaiproject.tool.api.SessionManager" />
      <property name="entityHandler" ref="org.sakaiproject.entitybroker.impl.EntityHandler" />
   </bean>

   <bean id="org.sakaiproject.entitybroker.impl.collector.BeanCollectorAutoRegistrar"
      class="org.sakaiproject.entitybroker.impl.collector.BeanCollectorAutoRegistrar"
      init-method="init">
   </bean>

</beans>